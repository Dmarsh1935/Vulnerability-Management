# Vulnerability Management in Azure using OpenVAS

## Introduction

In this project, I setup a vulnerability management scanner by installing OpenVAS from the Azure marketplace. Once setup, I created a Windows 10 client VM and intentionally made it vulnerable by disabling the firewall and installing outdated versions of software like Firefox, VLC Player, and Adobe Reader. Once the client VM was vulnerable, I configured OpenVAS to perform both an unauthenticated and credentialed scan against the Windows 10 VM. 

## Diagram of the Unauthenticated Scan
![image](https://github.com/user-attachments/assets/2baf26ed-9cb0-4166-b6e7-a8093cfb8395)


## Results of the Unauthenticated Scan
![image](https://github.com/user-attachments/assets/fbafb1db-0198-4d76-a956-655bc2e61d61)
![image](https://github.com/user-attachments/assets/29587864-b615-49d7-9163-8fae53eb13bf)
![image](https://github.com/user-attachments/assets/eee51b42-0e9b-43c8-8c08-8c1d052730ca)


As you can see, the vulnerable software installed earlier did not appear in the results of this scan. This is because it was an unauthenticated scan. To perform a credentialed scan I created new credentials in OpenVAS and cloned the previous target. I then executed the credentialed scan against the vulnerable VM using the newly created credentials. This scan takes longer than the previous one, but provides a more in-depth analysis of vulnerabilities.


## Results of Credentialed/Authenticated Scan
![Architecture Diagram](https://i.imgur.com/YQNa9Pp.jpg)

As you can see, with a credentialed scan we get a much more in-depth analysis of the vulnerabilities that the Windows 10 VM has. In the next step, I will remediate these and show the results. 



## Results After Remediating Vulnerabilities




## Metrics After Hardening / Security Controls

The following table shows the metrics we measured in our environment for another 24 hours, but after we have applied security controls:
Start Time 2023-03-18 15:37
Stop Time	2023-03-19 15:37

| Metric                   | Count
| ------------------------ | -----
| SecurityEvent            | 8778
| Syslog                   | 25
| SecurityAlert            | 0
| SecurityIncident         | 0
| AzureNetworkAnalytics_CL | 0

## Conclusion

In this project, a mini honeynet was constructed in Microsoft Azure and log sources were integrated into a Log Analytics workspace. Microsoft Sentinel was employed to trigger alerts and create incidents based on the ingested logs. Additionally, metrics were measured in the insecure environment before security controls were applied, and then again after implementing security measures. It is noteworthy that the number of security events and incidents were drastically reduced after the security controls were applied, demonstrating their effectiveness.

It is worth noting that if the resources within the network were heavily utilized by regular users, it is likely that more security events and alerts may have been generated within the 24-hour period following the implementation of the security controls.
